{"ast":null,"code":"import{loadStripe}from'@stripe/stripe-js';class PaymentService{constructor(){this.stripe=null;this.init();}async init(){// Replace with your Stripe publishable key\nthis.stripe=await loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);}async createSubscription(priceId){try{// Create a checkout session on the server\nconst response=await fetch('/api/create-checkout-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({priceId})});const session=await response.json();// Redirect to Stripe Checkout\nconst result=await this.stripe.redirectToCheckout({sessionId:session.id});if(result.error){throw new Error(result.error.message);}}catch(error){console.error('Payment error:',error);throw error;}}async getCurrentSubscription(){try{const response=await fetch('/api/current-subscription');return await response.json();}catch(error){console.error('Error fetching subscription:',error);return null;}}async cancelSubscription(){try{const response=await fetch('/api/cancel-subscription',{method:'POST'});return await response.json();}catch(error){console.error('Error canceling subscription:',error);throw error;}}}export default new PaymentService();","map":{"version":3,"names":["loadStripe","PaymentService","constructor","stripe","init","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","createSubscription","priceId","response","fetch","method","headers","body","JSON","stringify","session","json","result","redirectToCheckout","sessionId","id","error","Error","message","console","getCurrentSubscription","cancelSubscription"],"sources":["D:/AI Projects/translator/src/services/PaymentService.js"],"sourcesContent":["import { loadStripe } from '@stripe/stripe-js';\r\n\r\nclass PaymentService {\r\n  constructor() {\r\n    this.stripe = null;\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    // Replace with your Stripe publishable key\r\n    this.stripe = await loadStripe(process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY);\r\n  }\r\n\r\n  async createSubscription(priceId) {\r\n    try {\r\n      // Create a checkout session on the server\r\n      const response = await fetch('/api/create-checkout-session', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          priceId,\r\n        }),\r\n      });\r\n\r\n      const session = await response.json();\r\n\r\n      // Redirect to Stripe Checkout\r\n      const result = await this.stripe.redirectToCheckout({\r\n        sessionId: session.id,\r\n      });\r\n\r\n      if (result.error) {\r\n        throw new Error(result.error.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Payment error:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async getCurrentSubscription() {\r\n    try {\r\n      const response = await fetch('/api/current-subscription');\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Error fetching subscription:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async cancelSubscription() {\r\n    try {\r\n      const response = await fetch('/api/cancel-subscription', {\r\n        method: 'POST',\r\n      });\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Error canceling subscription:', error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new PaymentService();\r\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,mBAAmB,CAE9C,KAAM,CAAAC,cAAe,CACnBC,WAAWA,CAAA,CAAG,CACZ,IAAI,CAACC,MAAM,CAAG,IAAI,CAClB,IAAI,CAACC,IAAI,CAAC,CAAC,CACb,CAEA,KAAM,CAAAA,IAAIA,CAAA,CAAG,CACX;AACA,IAAI,CAACD,MAAM,CAAG,KAAM,CAAAH,UAAU,CAACK,OAAO,CAACC,GAAG,CAACC,gCAAgC,CAAC,CAC9E,CAEA,KAAM,CAAAC,kBAAkBA,CAACC,OAAO,CAAE,CAChC,GAAI,CACF;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8BAA8B,CAAE,CAC3DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBP,OACF,CAAC,CACH,CAAC,CAAC,CAEF,KAAM,CAAAQ,OAAO,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAErC;AACA,KAAM,CAAAC,MAAM,CAAG,KAAM,KAAI,CAAChB,MAAM,CAACiB,kBAAkB,CAAC,CAClDC,SAAS,CAAEJ,OAAO,CAACK,EACrB,CAAC,CAAC,CAEF,GAAIH,MAAM,CAACI,KAAK,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAACL,MAAM,CAACI,KAAK,CAACE,OAAO,CAAC,CACvC,CACF,CAAE,MAAOF,KAAK,CAAE,CACdG,OAAO,CAACH,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACtC,KAAM,CAAAA,KAAK,CACb,CACF,CAEA,KAAM,CAAAI,sBAAsBA,CAAA,CAAG,CAC7B,GAAI,CACF,KAAM,CAAAjB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CACzD,MAAO,MAAM,CAAAD,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOK,KAAK,CAAE,CACdG,OAAO,CAACH,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpD,MAAO,KAAI,CACb,CACF,CAEA,KAAM,CAAAK,kBAAkBA,CAAA,CAAG,CACzB,GAAI,CACF,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,0BAA0B,CAAE,CACvDC,MAAM,CAAE,MACV,CAAC,CAAC,CACF,MAAO,MAAM,CAAAF,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOK,KAAK,CAAE,CACdG,OAAO,CAACH,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACrD,KAAM,CAAAA,KAAK,CACb,CACF,CACF,CAEA,cAAe,IAAI,CAAAtB,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}